name: Mirror TUF targets
description: Used to mirror TUF targets from a source to a destination
inputs:
  metadata:
    description: source metadata location
    default: https://docker.github.io/tuf-staging/metadata
    required: true
  source:
    description: source targets location
    default: https://docker.github.io/tuf-staging/targets
    required: true
  destination:
    description: destination targets location
    required: true
    default: docker://docker/tuf-targets
  flags:
    description: flags to pass to the go-tuf-mirror command
    required: false
    default: ""
runs:
  using: docker
  image: docker://docker/go-tuf-mirror@sha256:2e69c9835dd33dc5fdc73336bb5822b2e0358469bf4bd45ae55907ef97ab8f46 # v0.1.6
  args:
    - targets
    - ${{ inputs.flags }}
    - --metadata
    - ${{ inputs.metadata }}
    - --source
    - ${{ inputs.source }}
    - --destination
    - ${{ inputs.destination }}
  env:
    DOCKER_CONFIG: /github/workspace/.docker
